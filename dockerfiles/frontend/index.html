<!doctype html>
<html>
<head><meta charset=utf-8><title>k8s RealWorld Demo</title></head>
<body>
<h1>Items</h1>
<ul id=items></ul>
<form id=f>
<input id=v placeholder="payload" />
<button>Send</button>
</form>
<script>
async function refresh(){
const r = await fetch('/api/items');
const items = await r.json();
const ul = document.getElementById('items');
ul.innerHTML = '';
items.forEach(it => { const li = document.createElement('li'); li.textContent = JSON.stringify(it); ul.appendChild(li); });
}
setInterval(refresh,2000); refresh();
document.getElementById('f').onsubmit = async e=>{
e.preventDefault();
const v = document.getElementById('v').value;
await fetch('/api/items', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({payload:v}) });
document.getElementById('v').value='';
}
</script>
</body>
</html>
